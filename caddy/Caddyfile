{
    email 4557674+pngan@users.noreply.github.com
    
    # Specify the ACME CA to use for all domains
    acme_ca https://acme-v02.api.letsencrypt.org/directory
}

ping.nganfamily.com {
    reverse_proxy ping-server:8000
}

gamebox.nganfamily.com {
    reverse_proxy gamebox
}

auth.nganfamily.com {
    reverse_proxy keycloak:8080
}

notes.nganfamily.com {
    reverse_proxy webfrontend:8080
}

aspire.nganfamily.com {
    reverse_proxy aspire-dashboard:18888
}

seemyaccount.com {
    reverse_proxy ping-server:8000
}

# --- Mattermost ---

message.nganfamily.com {
    # Increase max body size for large file uploads (e.g., 50MB)
    request_body {
        max_size 10GB
    }

    reverse_proxy mattermost:8065 {
        # Optional: ensure headers are preserved if you hit login loops
        header_up Host {host}
        header_up X-Real-IP {remote_host}
    }
}

# --- Immich for photos ---

photos.nganfamily.com {
    request_body {
        max_size 10GB
    }
    reverse_proxy immich-server:2283 {
        flush_interval -1
    }
}
